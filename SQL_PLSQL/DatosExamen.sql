REM ********** CREACION DE TABLAS *************

DROP TABLE PROFESORES CASCADE CONSTRAINTS;
CREATE TABLE PROFESORES(
  COD_PR			NUMBER(2)		PRIMARY KEY,
  DNI_PR			VARCHAR2(9)		UNIQUE,
  NOMBRE_PR			VARCHAR2(25)	NOT NULL,
  ESPECIALIDAD_PR	VARCHAR2(15)	NOT NULL
);

DROP TABLE CLASES CASCADE CONSTRAINTS;
CREATE TABLE CLASES(
  PROFESOR_CL		NUMBER(2),
  ASIGNATURA_CL		NUMBER(3),
  AULA_CL			NUMBER(2), 
  HORASSEM_CL		NUMBER(2), 
  PRIMARY KEY (PROFESOR_CL, ASIGNATURA_CL)
);

DROP TABLE ASIGNATURAS CASCADE CONSTRAINTS;
CREATE TABLE ASIGNATURAS(
  COD_AS		NUMBER(3)		PRIMARY KEY,
  NOMBRE_AS		VARCHAR2(35)	NOT NULL,
  HORAS_AS		NUMBER(3)		NOT NULL
);

DROP TABLE ALUMNOS CASCADE CONSTRAINTS;
CREATE TABLE ALUMNOS(
  COD_AL		NUMBER(2)	PRIMARY KEY,
  FECINC_AL		DATE,
  FECNAC_AL		DATE,
  DNI_AL		VARCHAR2(9)		UNIQUE,
  NOMBRE_AL		VARCHAR2(30) 	NOT NULL,
  CIUDAD_AL		VARCHAR2(10) 	NOT NULL,
  TUTOR_AL		NUMBER(2),
  DELEGADO_AL	NUMBER(2)
  );

DROP TABLE NOTAS CASCADE CONSTRAINTS;
CREATE TABLE NOTAS(
  ALUMNO_NO		NUMBER(2),
  ASIGNATURA_NO	NUMBER(3),
  FECHA_NO		DATE,
  NOTA_NO		NUMBER(4,2),
  PRIMARY KEY (ALUMNO_NO, ASIGNATURA_NO, FECHA_NO)
  );

REM *************** INSERCIÓN DE DATOS EN LAS TABLAS*************

ALTER SESSION SET NLS_DATE_FORMAT='DD/MM/YYYY';
SET LINESIZE 130
SET PAGESIZE 40

REM ********** TABLA PROFESORES: *************
INSERT INTO PROFESORES VALUES (10, '22481393D','Del Junco Suarez, Malvina', 'INFORMATICA');
INSERT INTO PROFESORES VALUES (20, '56373194D','Matito Lozano, Carmen    ', 'SISTEMAS');
INSERT INTO PROFESORES VALUES (30, '36090320D','Toscano Fernandez, Juan  ', 'INFORMATICA');
INSERT INTO PROFESORES VALUES (40, '93739487K','Valverde Gallego, Enrique', 'ECONOMIA');

COMMIT;

REM ********** TABLA ASIGNATURAS: *************

INSERT INTO ASIGNATURAS VALUES (100, 'Lenguajes de marcas'             , 128);
INSERT INTO ASIGNATURAS VALUES (200, 'Entornos de desarrollo'          ,  96);
INSERT INTO ASIGNATURAS VALUES (300, 'Bases de datos'                  , 192);
INSERT INTO ASIGNATURAS VALUES (400, 'Programacion'                    , 256);
INSERT INTO ASIGNATURAS VALUES (500, 'Sistemas informaticos'           , 192);
INSERT INTO ASIGNATURAS VALUES (600, 'Formacion y orientacion laboral' ,  96);
COMMIT;


REM ********** TABLA CLASES *************

INSERT INTO CLASES VALUES (10, 100, 44, 4);
INSERT INTO CLASES VALUES (30, 200, 44, 3);
INSERT INTO CLASES VALUES (10, 300, 40, 6);
INSERT INTO CLASES VALUES (30, 400, 44, 8);
INSERT INTO CLASES VALUES (20, 500, 44, 6);
INSERT INTO CLASES VALUES (40, 600, 44, 3);
COMMIT;

REM ********** TABLA NOTAS: *************

INSERT INTO NOTAS VALUES (10, 100,TO_DATE('14/12/2017'),  7.5);
INSERT INTO NOTAS VALUES (11, 100,TO_DATE('14/12/2017'),  3.5);
INSERT INTO NOTAS VALUES (12, 100,TO_DATE('14/12/2017'), NULL);
INSERT INTO NOTAS VALUES (13, 100,TO_DATE('14/12/2017'),  9.0);
INSERT INTO NOTAS VALUES (10, 200,TO_DATE('14/12/2017'),  6.5);
INSERT INTO NOTAS VALUES (11, 200,TO_DATE('14/12/2017'),  3.5);
INSERT INTO NOTAS VALUES (14, 200,TO_DATE('14/12/2017'),  6.5);
INSERT INTO NOTAS VALUES (15, 200,TO_DATE('14/12/2017'),  3.5);
INSERT INTO NOTAS VALUES (16, 200,TO_DATE('14/12/2017'), NULL);
INSERT INTO NOTAS VALUES (17, 200,TO_DATE('14/12/2017'),  9.0);
INSERT INTO NOTAS VALUES (10, 300,TO_DATE('14/12/2017'),  8.5);
INSERT INTO NOTAS VALUES (18, 300,TO_DATE('14/12/2017'),  6.5);
INSERT INTO NOTAS VALUES (19, 300,TO_DATE('14/12/2017'),  3.5);
INSERT INTO NOTAS VALUES (20, 300,TO_DATE('14/12/2017'),  7.0);
INSERT INTO NOTAS VALUES (21, 300,TO_DATE('14/12/2017'),  9.0);
INSERT INTO NOTAS VALUES (22, 300,TO_DATE('14/12/2017'),  5.5);
INSERT INTO NOTAS VALUES (22, 600,TO_DATE('14/12/2017'),  7.5);

INSERT INTO NOTAS VALUES (10, 100,TO_DATE('14/12/2017')-14,  6.5);
INSERT INTO NOTAS VALUES (11, 100,TO_DATE('14/12/2017')-14, NULL);
INSERT INTO NOTAS VALUES (12, 100,TO_DATE('14/12/2017')-14,  9.0);
INSERT INTO NOTAS VALUES (13, 100,TO_DATE('14/12/2017')-14,  3.5);
INSERT INTO NOTAS VALUES (10, 200,TO_DATE('14/12/2017')-14,  3.5);
INSERT INTO NOTAS VALUES (11, 200,TO_DATE('14/12/2017')-14, NULL);
INSERT INTO NOTAS VALUES (14, 200,TO_DATE('14/12/2017')-14,  3.5);
INSERT INTO NOTAS VALUES (15, 200,TO_DATE('14/12/2017')-14, NULL);
INSERT INTO NOTAS VALUES (16, 200,TO_DATE('14/12/2017')-14,  9.0);
INSERT INTO NOTAS VALUES (17, 200,TO_DATE('14/12/2017')-14,  3.5);
INSERT INTO NOTAS VALUES (10, 300,TO_DATE('14/12/2017')-14,  5.5);
INSERT INTO NOTAS VALUES (18, 300,TO_DATE('14/12/2017')-14,  3.5);
INSERT INTO NOTAS VALUES (19, 300,TO_DATE('14/12/2017')-14, NULL);
INSERT INTO NOTAS VALUES (20, 300,TO_DATE('14/12/2017')-14,  9.0);
INSERT INTO NOTAS VALUES (21, 300,TO_DATE('14/12/2017')-14,  5.5);
INSERT INTO NOTAS VALUES (22, 300,TO_DATE('14/12/2017')-14,  4.5);
INSERT INTO NOTAS VALUES (22, 600,TO_DATE('14/12/2017')-14,  9.5);

INSERT INTO NOTAS VALUES (10, 100,TO_DATE('14/12/2017')-56,  7.5);
INSERT INTO NOTAS VALUES (11, 100,TO_DATE('14/12/2017')-56,  8.0);
INSERT INTO NOTAS VALUES (12, 100,TO_DATE('14/12/2017')-56,  9.5);
INSERT INTO NOTAS VALUES (13, 100,TO_DATE('14/12/2017')-56,  2.5);
INSERT INTO NOTAS VALUES (10, 200,TO_DATE('14/12/2017')-56,  7.5);
INSERT INTO NOTAS VALUES (11, 200,TO_DATE('14/12/2017')-56,  8.0);
INSERT INTO NOTAS VALUES (14, 200,TO_DATE('14/12/2017')-56,  1.5);
INSERT INTO NOTAS VALUES (15, 200,TO_DATE('14/12/2017')-56,  8.0);
INSERT INTO NOTAS VALUES (16, 200,TO_DATE('14/12/2017')-56,  9.5);
INSERT INTO NOTAS VALUES (17, 200,TO_DATE('14/12/2017')-56, NULL);
INSERT INTO NOTAS VALUES (10, 300,TO_DATE('14/12/2017')-56, 10.0);
INSERT INTO NOTAS VALUES (18, 300,TO_DATE('14/12/2017')-56,  7.5);
INSERT INTO NOTAS VALUES (19, 300,TO_DATE('14/12/2017')-56, NULL);
INSERT INTO NOTAS VALUES (20, 300,TO_DATE('14/12/2017')-56,  9.5);
INSERT INTO NOTAS VALUES (21, 300,TO_DATE('14/12/2017')-56,  9.0);
INSERT INTO NOTAS VALUES (22, 300,TO_DATE('14/12/2017')-56,  6.5);
INSERT INTO NOTAS VALUES (22, 600,TO_DATE('14/12/2017')-56,  9.5);
COMMIT;

REM ********** TABLA ALUMNOS *************

INSERT INTO ALUMNOS VALUES (10, NULL,'23/07/1997','55645991T','Carmona Castro, Nicolas M.   ', 'Huelva' , 10, 10);
INSERT INTO ALUMNOS VALUES (11, NULL,'15/11/1986','54652636D','Casado Ortega, Emilio        ', 'Sevilla', 10, 20);
INSERT INTO ALUMNOS VALUES (12, NULL,'05/08/1995','71106202D','Cornejo Fernandez-Gao, Ramiro', 'Huelva' , 10, 20);
INSERT INTO ALUMNOS VALUES (13, NULL,'12/04/1997','56646516D','Gomez Diaz, Daniel           ', 'Badajoz', 10, 10);
INSERT INTO ALUMNOS VALUES (14, NULL,'10/12/1996','51506642K','Gonzalez Flores, Francisco J.', 'Sevilla', 10, 10);
INSERT INTO ALUMNOS VALUES (15, NULL,'11/01/1996','55980648H','Oancea , Dragos Andrei       ', 'Huelva' , 10, 10);
INSERT INTO ALUMNOS VALUES (16, NULL,'31/10/1995','64555339D','Olmo Reyes, Marcos Manuel    ', 'Sevilla', 20, 10);
INSERT INTO ALUMNOS VALUES (17, NULL,'06/12/1995','37839343D','Oria Guerrero, Leopoldo      ', 'Huelva' , 20, 20);
INSERT INTO ALUMNOS VALUES (18, NULL,'09/05/1992','76138301V','Perez Lobato, Eduardo Jesus  ', 'Badajoz', 20, 20);
INSERT INTO ALUMNOS VALUES (19, NULL,'26/08/1987','67918627L','Ramirez Richarte, Jesus      ', 'Badajoz', 20, 20);
INSERT INTO ALUMNOS VALUES (20, NULL,'12/02/1979','63453550T','Ruiz Sanchez, Alejandro      ', 'Sevilla', 20, 20);
INSERT INTO ALUMNOS VALUES (21, NULL,'22/04/1993','90676183D','Sanchez Soriano, Jose Antonio', 'Sevilla', 20, 10);
INSERT INTO ALUMNOS VALUES (22, NULL,'10/02/1997','22563618D','Silva Mulero, Jeronimo       ', 'Badajoz', 20, 10);
UPDATE ALUMNOS SET FECINC_AL = ADD_MONTHS(SYSDATE, (-1)*TO_CHAR(FECNAC_AL,'DD'));
COMMIT;


REM ********** CLAVES AJENAS *************************

ALTER TABLE ALUMNOS ADD CONSTRAINT FK_ALUMNOS_TUT FOREIGN KEY (TUTOR_AL) REFERENCES PROFESORES ON DELETE CASCADE;
ALTER TABLE ALUMNOS ADD CONSTRAINT FK_ALUMNOS_DEL FOREIGN KEY (DELEGADO_AL) REFERENCES ALUMNOS ON DELETE CASCADE;
ALTER TABLE NOTAS ADD CONSTRAINT FK_NOTAS_AL FOREIGN KEY (ALUMNO_NO) REFERENCES ALUMNOS ON DELETE CASCADE;
ALTER TABLE NOTAS ADD CONSTRAINT FK_NOTAS_AS FOREIGN KEY (ASIGNATURA_NO) REFERENCES ASIGNATURAS ON DELETE CASCADE;
ALTER TABLE CLASES ADD CONSTRAINT FK_CLASE_PR FOREIGN KEY (PROFESOR_CL) REFERENCES PROFESORES ON DELETE CASCADE;
ALTER TABLE CLASES ADD CONSTRAINT FK_CLASE_AS FOREIGN KEY (ASIGNATURA_CL) REFERENCES ASIGNATURAS ON DELETE CASCADE;

SELECT * FROM ASIGNATURAS;
SELECT * FROM PROFESORES;
SELECT * FROM ALUMNOS;

REM ********** FIN *************************
